# XBRL Financial Data API - å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

## ğŸ“Š ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³

### âœ… å®Œäº†æ¸ˆã¿
- **ãƒ‡ãƒ¼ã‚¿åŸºç›¤**
  - 4,131ç¤¾ã®æœ‰ä¾¡è¨¼åˆ¸å ±å‘Šæ›¸ã‚’Supabaseã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«æ ¼ç´
  - å„ä¼æ¥­10-25å€‹ã®Markdownãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆåˆè¨ˆ53,434ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
  - 2021å¹´åº¦ãƒ‡ãƒ¼ã‚¿å®Œå…¨ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

- **åŸºæœ¬API**
  - Express.jsãƒ™ãƒ¼ã‚¹ã®APIã‚µãƒ¼ãƒãƒ¼ï¼ˆãƒãƒ¼ãƒˆ5001ï¼‰
  - ä¼æ¥­åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§å–å¾—
  - å€‹åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å–å¾—
  - ã‚»ã‚¯ã‚·ãƒ§ãƒ³è‡ªå‹•åˆ¤å®šæ©Ÿèƒ½

## ğŸš€ ä»Šå¾Œã®å®Ÿè£…è¨ˆç”»

### Phase 1: ã‚³ã‚¢APIæ©Ÿèƒ½æ‹¡å¼µï¼ˆ1-2é€±é–“ï¼‰

#### 1.1 æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½
```javascript
GET /api/companies/search
  ?name=ãƒˆãƒ¨ã‚¿           // ä¼æ¥­åæ¤œç´¢
  &ticker=7203          // è¨¼åˆ¸ã‚³ãƒ¼ãƒ‰æ¤œç´¢
  &industry=è‡ªå‹•è»Š       // æ¥­ç¨®ãƒ•ã‚£ãƒ«ã‚¿
  &market=æ±è¨¼ãƒ—ãƒ©ã‚¤ãƒ     // å¸‚å ´åŒºåˆ†ãƒ•ã‚£ãƒ«ã‚¿
```

#### 1.2 è²¡å‹™ãƒ‡ãƒ¼ã‚¿æŠ½å‡ºAPI
```javascript
GET /api/companies/:id/financials
  ?year=2021
  &metrics=revenue,profit,roe  // ç‰¹å®šæŒ‡æ¨™ã®ã¿å–å¾—
```

#### 1.3 æ¯”è¼ƒåˆ†æAPI
```javascript
POST /api/analysis/compare
Body: {
  companies: ["S100LJ4F", "S100LJ65"],
  sections: ["ä¼æ¥­ã®æ¦‚æ³", "äº‹æ¥­ã®çŠ¶æ³"],
  year: 2021
}
```

### Phase 2: ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ»åˆ†ææ©Ÿèƒ½ï¼ˆ2-3é€±é–“ï¼‰

#### 2.1 è²¡å‹™æŒ‡æ¨™è‡ªå‹•è¨ˆç®—
- KPIè‡ªå‹•æŠ½å‡ºï¼ˆå£²ä¸Šé«˜ã€å–¶æ¥­åˆ©ç›Šã€ç´”åˆ©ç›Šã€ROEã€ROAç­‰ï¼‰
- æˆé•·ç‡è¨ˆç®—ï¼ˆå‰å¹´æ¯”ã€CAGRï¼‰
- æ¥­ç•Œå¹³å‡ã¨ã®æ¯”è¼ƒ

#### 2.2 ã‚»ã‚°ãƒ¡ãƒ³ãƒˆæƒ…å ±API
```javascript
GET /api/companies/:id/segments
  ?type=geographic  // åœ°åŸŸåˆ¥
  ?type=business    // äº‹æ¥­åˆ¥
```

#### 2.3 æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿API
```javascript
GET /api/companies/:id/timeseries
  ?metric=revenue
  &from=2019&to=2021
```

### Phase 3: AIé€£æºãƒ»é«˜åº¦ãªåˆ†æï¼ˆ3-4é€±é–“ï¼‰

#### 3.1 AIåˆ†æã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
```javascript
POST /api/ai/analyze
Headers: X-User-API-Key: claude_api_key
Body: {
  company_id: "S100LJ4F",
  sections: ["äº‹æ¥­ç­‰ã®ãƒªã‚¹ã‚¯"],
  prompt: "ãƒªã‚¹ã‚¯è¦å› ã‚’3ã¤ã«è¦ç´„"
}
```

#### 3.2 æ¥­ç•Œãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ
```javascript
GET /api/industries/:industry/trends
  ?year=2021
  &metrics=growth,profitability
```

#### 3.3 ãƒ”ã‚¢ã‚°ãƒ«ãƒ¼ãƒ—åˆ†æ
```javascript
GET /api/companies/:id/peers
  ?limit=10
  &criteria=market_cap,industry
```

### Phase 4: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼ˆ2é€±é–“ï¼‰

#### 4.1 ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°æˆ¦ç•¥
- Rediså°å…¥ã«ã‚ˆã‚‹ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- é »ç¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã®äº‹å‰è¨ˆç®—
- CDNã‚¨ãƒƒã‚¸ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°

#### 4.2 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–
- PostgreSQLç§»è¡Œï¼ˆç¾åœ¨ã®Supabaseåˆ©ç”¨ã‚’æ‹¡å¼µï¼‰
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ–
- ãƒãƒ†ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ‰ãƒ“ãƒ¥ãƒ¼æ´»ç”¨

#### 4.3 ãƒãƒƒãƒå‡¦ç†API
```javascript
POST /api/batch/process
Body: {
  requests: [
    { method: "GET", path: "/companies/S100LJ4F/files" },
    { method: "GET", path: "/companies/S100LJ65/files" }
  ]
}
```

### Phase 5: ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºæ©Ÿèƒ½ï¼ˆ4é€±é–“ï¼‰

#### 5.1 èªè¨¼ãƒ»èªå¯ã‚·ã‚¹ãƒ†ãƒ 
- OAuth 2.0å®Ÿè£…
- APIã‚­ãƒ¼ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™ï¼ˆãƒ†ã‚£ã‚¢åˆ¥ï¼‰
- ä½¿ç”¨é‡ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°

#### 5.2 Webhookãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
```javascript
POST /api/webhooks/subscribe
Body: {
  event: "new_report",
  company_ids: ["S100LJ4F"],
  callback_url: "https://client.com/webhook"
}
```

#### 5.3 ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
```javascript
POST /api/export
Body: {
  companies: ["S100LJ4F"],
  format: "excel",  // excel, csv, json
  sections: ["all"]
}
```

## ğŸ“ æŠ€è¡“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### æ¨å¥¨ã‚¹ã‚¿ãƒƒã‚¯
```yaml
API Layer:
  - Express.js / Fastify (ç¾åœ¨: Express.js)
  - GraphQL (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)

ãƒ‡ãƒ¼ã‚¿å±¤:
  - Supabase (PostgreSQL + Storage) âœ…
  - Redis (ã‚­ãƒ£ãƒƒã‚·ãƒ¥)
  - Elasticsearch (å…¨æ–‡æ¤œç´¢)

å‡¦ç†å±¤:
  - Bull Queue (ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¸ãƒ§ãƒ–)
  - Python (è²¡å‹™åˆ†æå‡¦ç†)

AI/ML:
  - Claude API (ãƒ†ã‚­ã‚¹ãƒˆåˆ†æ) âœ…
  - OpenAI Embeddings (é¡ä¼¼æ¤œç´¢)
  - TensorFlow (äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«)
```

## ğŸ“‹ APIè¨­è¨ˆåŸå‰‡

### RESTfulè¨­è¨ˆ
- æ˜ç¢ºãªãƒªã‚½ãƒ¼ã‚¹æŒ‡å‘URL
- é©åˆ‡ãªHTTPãƒ¡ã‚½ãƒƒãƒ‰ä½¿ç”¨
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã®æ­£ã—ã„åˆ©ç”¨

### ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼
```json
{
  "status": "success",
  "data": { ... },
  "meta": {
    "timestamp": "2025-08-15T10:00:00Z",
    "version": "1.0",
    "total_count": 100,
    "page": 1
  },
  "links": {
    "self": "/api/companies/S100LJ4F",
    "next": "/api/companies/S100LJ4G"
  }
}
```

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```json
{
  "status": "error",
  "error": {
    "code": "RESOURCE_NOT_FOUND",
    "message": "Company not found",
    "details": { "company_id": "S100XXXX" }
  }
}
```

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

1. **APIã‚­ãƒ¼ç®¡ç†**
   - ãƒãƒƒã‚·ãƒ¥åŒ–ã—ã¦ä¿å­˜
   - å®šæœŸçš„ãªãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
   - ã‚¹ã‚³ãƒ¼ãƒ—ãƒ™ãƒ¼ã‚¹ã®æ¨©é™

2. **ãƒ¬ãƒ¼ãƒˆåˆ¶é™**
   ```
   Free:  100 req/hour
   Basic: 1000 req/hour
   Pro:   10000 req/hour
   ```

3. **ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼**
   - å…¥åŠ›ã‚µãƒ‹ã‚¿ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³
   - SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–
   - XSSé˜²æ­¢

## ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™

- **ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ **
  - ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§: < 200ms
  - ãƒ•ã‚¡ã‚¤ãƒ«å–å¾—: < 500ms
  - è²¡å‹™åˆ†æ: < 1000ms

- **å¯ç”¨æ€§**
  - 99.9% ã‚¢ãƒƒãƒ—ã‚¿ã‚¤ãƒ 
  - è‡ªå‹•ãƒ•ã‚§ã‚¤ãƒ«ã‚ªãƒ¼ãƒãƒ¼
  - ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ç›£è¦–

## ğŸ—“ï¸ ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

| Phase | æœŸé–“ | å®Œäº†äºˆå®š | ä¸»è¦æˆæœç‰© |
|-------|------|---------|-----------|
| Phase 1 | 1-2é€±é–“ | 2025å¹´8æœˆæœ« | æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°API |
| Phase 2 | 2-3é€±é–“ | 2025å¹´9æœˆä¸­æ—¬ | è²¡å‹™åˆ†ææ©Ÿèƒ½ |
| Phase 3 | 3-4é€±é–“ | 2025å¹´10æœˆåˆæ—¬ | AIé€£æº |
| Phase 4 | 2é€±é–“ | 2025å¹´10æœˆä¸­æ—¬ | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– |
| Phase 5 | 4é€±é–“ | 2025å¹´11æœˆä¸­æ—¬ | ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºæ©Ÿèƒ½ |

## ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè¨ˆç”»

1. **OpenAPIä»•æ§˜æ›¸** (Swagger)
2. **SDKé–‹ç™º**
   - JavaScript/TypeScript
   - Python
   - Java
3. **åˆ©ç”¨ã‚¬ã‚¤ãƒ‰**
   - ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ
   - ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
   - ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

## ğŸ¯ æˆåŠŸæŒ‡æ¨™

- APIåˆ©ç”¨è€…æ•°: 1000+ é–‹ç™ºè€…
- æ—¥æ¬¡APIã‚³ãƒ¼ãƒ«: 100ä¸‡+
- å¹³å‡ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ : < 300ms
- ã‚¨ãƒ©ãƒ¼ç‡: < 0.1%
- é–‹ç™ºè€…æº€è¶³åº¦: 4.5/5.0

---

æœ€çµ‚æ›´æ–°: 2025å¹´8æœˆ15æ—¥