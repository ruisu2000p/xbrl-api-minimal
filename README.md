# XBRL Financial API - Minimal Edition v3.0

[![Vercel](https://img.shields.io/badge/Deployed%20on-Vercel-black)](https://xbrl-api-minimal.vercel.app)
[![NPM](https://img.shields.io/npm/v/shared-supabase-mcp-minimal)](https://www.npmjs.com/package/shared-supabase-mcp-minimal)
[![Version](https://img.shields.io/badge/Version-3.0.1-green)](https://github.com/ruisu2000p/xbrl-api-minimal)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![MCP Compatible](https://img.shields.io/badge/MCP-v3.0-blue)](https://modelcontextprotocol.io)

æ—¥æœ¬ä¼æ¥­4,000ç¤¾ä»¥ä¸Šã€5å¹´åˆ†ã®æœ‰ä¾¡è¨¼åˆ¸å ±å‘Šæ›¸ï¼ˆXBRL/EDINETï¼‰ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®ã‚·ãƒ³ãƒ—ãƒ«ãªAPI + Claude Desktop MCPçµ±åˆ

## ğŸš€ æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ v3.0.1 - å“è³ªæ”¹å–„

### æœ€æ–°ã®æ”¹å–„ï¼ˆv3.0.1ï¼‰
- âœ… **æœ¬ç•ªç”¨ãƒ­ã‚®ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ** - console.logã‚’ç’°å¢ƒå¯¾å¿œã®ãƒ­ã‚¬ãƒ¼ã«ç½®ãæ›ãˆ
- âœ… **API ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ¨™æº–åŒ–** - çµ±ä¸€ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- âœ… **ã‚³ãƒ¼ãƒ‰å“è³ªå‘ä¸Š** - å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã«ã‚ˆã‚‹é‡è¤‡å‰Šæ¸›

### v3.0.0 ä¸»è¦å¤‰æ›´ç‚¹
- âœ… **APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’60%å‰Šæ¸›** - 6ã¤ã®ã‚³ã‚¢æ©Ÿèƒ½ã®ã¿ã«é›†ç´„
- âœ… **ä¸è¦ãªä¾å­˜é–¢ä¿‚ã‚’å‰Šé™¤** - ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚µã‚¤ã‚º40%å‰Šæ¸›
- âœ… **MCPãƒ„ãƒ¼ãƒ«ã‚’2ã¤ã«ç°¡ç´ åŒ–** - ä¼æ¥­æ¤œç´¢â†’æ–‡æ›¸å–å¾—ã®ã‚·ãƒ³ãƒ—ãƒ«ãƒ•ãƒ­ãƒ¼
- âœ… **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½ã®æœ€é©åŒ–** - å¿…è¦æœ€å°é™ã®èªè¨¼æ©Ÿèƒ½
- âœ… **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š** - ä¸è¦ãªå‡¦ç†ã‚’å‰Šé™¤

## ğŸŒŸ ç‰¹å¾´

- **4,000ç¤¾ä»¥ä¸Šã®è²¡å‹™ãƒ‡ãƒ¼ã‚¿** - æ—¥æœ¬ã®å…¨ä¸Šå ´ä¼æ¥­ã®æœ‰ä¾¡è¨¼åˆ¸å ±å‘Šæ›¸
- **5å¹´åˆ†ã®ãƒ‡ãƒ¼ã‚¿** - 2020å¹´ã€œ2024å¹´ã®è²¡å‹™æƒ…å ±
- **Markdownå½¢å¼** - XBRLã‹ã‚‰å¤‰æ›æ¸ˆã¿ã§èª­ã¿ã‚„ã™ã„
- **ã‚·ãƒ³ãƒ—ãƒ«è¨­è¨ˆ** - å¿…è¦æœ€å°é™ã®æ©Ÿèƒ½ã«é›†ç´„
- **Claude Desktopå¯¾å¿œ** - 2ã¤ã®MCPãƒ„ãƒ¼ãƒ«ã§ç°¡å˜ã‚¢ã‚¯ã‚»ã‚¹

## ğŸ“¦ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### NPMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ä½¿ç”¨
```bash
npm install shared-supabase-mcp-minimal
```
è©³ç´°: https://www.npmjs.com/package/shared-supabase-mcp-minimal

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º
```bash
npm install
npm run dev
```

## ğŸ”§ ç’°å¢ƒå¤‰æ•°

`.env.local`ã‚’ä½œæˆï¼š

```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
```

## ğŸ› ï¸ Claude Desktopè¨­å®š

### æ–¹æ³•1: NPMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰

[NPMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸: shared-supabase-mcp-minimal](https://www.npmjs.com/package/shared-supabase-mcp-minimal)

`claude_desktop_config.json`ã«è¿½åŠ ï¼š

```json
{
  "mcpServers": {
    "xbrl-financial": {
      "command": "npx",
      "args": ["shared-supabase-mcp-minimal@latest"],
      "env": {
        "SUPABASE_URL": "https://wpwqxhyiglbtlaimrjrx.supabase.co",
        "SUPABASE_SERVICE_KEY": "your_service_key"
      }
    }
  }
}
```

### æ–¹æ³•2: ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ç”¨

```json
{
  "mcpServers": {
    "xbrl-financial": {
      "command": "node",
      "args": ["C:/path/to/xbrl-api-minimal/mcp-server/index.js"]
    }
  }
}
```

### åˆ©ç”¨å¯èƒ½ãªMCPãƒ„ãƒ¼ãƒ«ï¼ˆv3.0ï¼‰

1. **search-documents** - ä¼æ¥­åã§è²¡å‹™æ–‡æ›¸ã‚’æ¤œç´¢
2. **get-document** - ç‰¹å®šã®è²¡å‹™æ–‡æ›¸ã‚’å–å¾—

## ğŸ“š APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆv3.0ï¼‰

### ã‚³ã‚¢æ©Ÿèƒ½ï¼ˆ6ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|-------------|------|
| `/api/v1/companies` | ä¼æ¥­ä¸€è¦§ãƒ»æ¤œç´¢ |
| `/api/v1/documents` | è²¡å‹™æ–‡æ›¸å–å¾— |
| `/api/v1/markdown` | Markdownã‚³ãƒ³ãƒ†ãƒ³ãƒ„å–å¾— |
| `/api/v1/search` | çµ±åˆæ¤œç´¢ |
| `/api/v1/mcp` | MCPçµ±åˆ |
| `/api/v1/config` | è¨­å®šæƒ…å ± |

### å‰Šé™¤ã•ã‚ŒãŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆv3.0ï¼‰

ä»¥ä¸‹ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ç°¡ç´ åŒ–ã®ãŸã‚å‰Šé™¤ã•ã‚Œã¾ã—ãŸï¼š
- é‡è¤‡ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆcompanies-publicã€documents-optimizedç­‰ï¼‰
- æœªä½¿ç”¨æ©Ÿèƒ½ï¼ˆcacheã€financial-analysisã€financial-metricsï¼‰
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰é–¢é€£ï¼ˆdashboard/statsã€usageã€profileï¼‰
- ä¸è¦ãªèªè¨¼æ©Ÿèƒ½ï¼ˆforgot-passwordã€reset-passwordï¼‰

## ğŸš€ ä½¿ç”¨ä¾‹

### APIã®ä½¿ç”¨

```javascript
// ä¼æ¥­æ¤œç´¢
const response = await fetch('/api/v1/companies?search=ãƒˆãƒ¨ã‚¿');
const companies = await response.json();

// æ–‡æ›¸å–å¾—
const doc = await fetch('/api/v1/documents?company_id=123');
const document = await doc.json();
```

### Claude Desktopã§ã®ä½¿ç”¨

```
ã€Œãƒˆãƒ¨ã‚¿ã®æœ€æ–°ã®æœ‰ä¾¡è¨¼åˆ¸å ±å‘Šæ›¸ã‚’è¦‹ã›ã¦ã€
ã€Œã‚½ãƒ‹ãƒ¼ã®å£²ä¸Šé«˜ã®æ¨ç§»ã‚’æ•™ãˆã¦ã€
```

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

```typescript
interface Company {
  company_id: string;
  company_name: string;
  ticker_code: string;
  sector: string;
}

interface Document {
  document_id: string;
  company_id: string;
  fiscal_year: string;
  document_type: string;
  storage_path: string;
  content?: string;
}
```

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- Supabase Row Level Security (RLS)
- ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹èªè¨¼æƒ…å ±ç®¡ç†
- æœ€å°é™ã®å…¬é–‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ğŸ¤ è²¢çŒ®

Issues and Pull Requests are welcome!

## ğŸ“§ ãŠå•ã„åˆã‚ã›

[GitHub Issues](https://github.com/ruisu2000p/xbrl-api-minimal/issues)

---

**Version 3.0.1** - Improved logging and error handling for production readiness